<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>little angular book</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../normalize.css">
    <link rel="stylesheet" href="../../hljs-theme.css">
    <link rel="stylesheet" href="../../markdown.css">
    <link rel="stylesheet" href="../../main.css?v=2.0.0">
</head>
<body>
<a id="menu-toggle" class="menu-toggle" href="#" title="toggle menu">
    <span></span><span></span><span></span>
</a>
<div class="menu">
    
        <div class="menu-item depth-1 ">
             
            <a href="../../index.html">Little angular book</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../01-typescript/index.html">TypeScript</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/01-basic-types/index.html">Basic types</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/02-classes-interfaces/index.html">Classes and interfaces</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/03-functions/index.html">Functions</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/04-enums/index.html">Enums</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/05-advanced-types/index.html">Advanced types</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/06-decorators/index.html">Decorators</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/07-generics/index.html">Generics</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../02-components/index.html">Components</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/01-lifecycle-events/index.html">Lifecycle events</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/02-input-output/index.html">Input / Output</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/03-templates/index.html">Templates</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/01-raw-html/index.html">Raw HTML</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/02-data-flow/index.html">Data flow</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/03-class-style/index.html">Class &amp; style helpers</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/04-structural-directives/index.html">Structural directives</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/04-styles/index.html">Styles</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../03-routing/index.html">Routing</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../03-routing/01-parameters/index.html">Route parameters</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../03-routing/02-query-parameters/index.html">Query parameters</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../04-dependency-injection/index.html">Dependency injection</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/01-circumventing-di/index.html">Circumventing the DI system</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/02-sharing-services/index.html">Sharing services</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/03-providers/index.html">Providers</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../04-dependency-injection/03-providers/01-class-provider/index.html">Class provider</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../04-dependency-injection/03-providers/02-factory-provider/index.html">Factory provider</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../04-dependency-injection/03-providers/03-value-provider/index.html">Value provider</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/04-di-tricks/index.html">DI tricks</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../05-services/index.html">Services</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../06-testing/index.html">Testing</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../06-testing/01-jasmine/index.html">Jasmine </a>
            
        </div>
    
        <div class="menu-item depth-3 selected">
            ▹
            <a href="../../06-testing/02-snippets/index.html">Snippets</a>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#1">
                        let
                    </a>
                </div>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#2">
                        rx
                    </a>
                </div>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#3">
                        mock store
                    </a>
                </div>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#4">
                        fixture
                    </a>
                </div>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#5">
                        spies
                    </a>
                </div>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#6">
                        jest fake time
                    </a>
                </div>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../06-testing/03-templates/index.html">Templates</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../07-observables/index.html">Observables</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../07-observables/01-examples/index.html">Examples</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../08-problems/index.html">Problems</a>
            
        </div>
    
</div>
<div class="markdown-body"><h1 id="snippets">Snippets</h1>
<h2><a name="1">let</a></h2>
<ul>
<li>Event: <code>let eventMock: jasmine.SpyObj&lt;Event&gt;</code></li>
<li>Router: <code>let routerMock: jasmine.SpyObj&lt;Router&gt;</code></li>
<li>FooService: <code>let fooServiceMock: jasmine.SpyObj&lt;FooService&gt;</code></li>
<li>LoggerService: <code>let loggerServiceMock: jasmine.SpyObj&lt;LoggerService&gt;</code></li>
</ul>
<h2><a name="2">rx</a></h2>
<ul>
<li>Obsevable: <code>foobarMock.corgeMethod.and.returnValue(of())</code></li>
<li>Error: <code>foobarMock.corgeMethod.and.returnValue(throwError(() =&gt; error))</code></li>
</ul>
<h2><a name="3">mock store</a></h2>
<ul>
<li>Store: <code>let mockStore$: MockStore&lt;PartialDeep&lt;IAppState&gt;&gt;</code></li>
<li>Store provide: <code>provideMockStore&lt;PartialDeep&lt;IAppState&gt;&gt;({ initialState: { ... } }),</code></li>
<li>Store assignment: <code>mockStore$ = TestBed.inject(Store) as MockStore&lt;PartialDeep&lt;IAppState&gt;&gt;</code></li>
<li>Refresh state: <code>mockStore$.refreshState()</code></li>
<li>Override selector: <code>mockStore$.overrideSelector(selectFoobar, value)</code></li>
<li>Spy on dispatch: <code>spyOn(mockStore$, &#39;dispatch&#39;)</code> and then check with <code>expect(mockStore$.dispatch).toHaveBeenCalledWith(dispatchedAction)</code></li>
</ul>
<h2><a name="4">fixture</a></h2>
<ul>
<li>Get child: <code>fixture.debugElement.query(By.directive(FoobarMockComponent)).componentInstance</code></li>
<li>Get children: <code>fixture.debugElement.queryAll(By.directive(FoobarMockComponent)).map(debugEl =&gt; debugEl.componentInstance)</code></li>
<li>Force detect changes: <code>fixture.detectChanges()</code> (sometimes you may need to &quot;wait&quot; a bit: <code>await fixture.whenStable()</code>)</li>
<li>Initial component creation: <code>fixture = TestBed.createComponent(FoobarComponent)</code> and then <code>component = fixture.componentInstance</code></li>
<li>Set input prop (standalone component): <code>fixture.componentRef.setInput(&#39;inputName&#39;, value)</code></li>
</ul>
<h2><a name="5">spies</a></h2>
<ul>
<li>Create spy object: <code>jasmine.createSpyObj(&#39;fooService&#39;, [&#39;method&#39;])</code></li>
<li>Router: <code>routerMock = jasmine.createSpyObj&lt;Router&gt;(&#39;Router&#39;, [&#39;navigate&#39;])</code></li>
<li>Event: <code>eventMock = jasmine.createSpyObj&lt;MouseEvent&gt;(&#39;clickEvent&#39;, [&#39;stopPropagation&#39;])</code></li>
<li>Logger: <code>loggerServiceMock = jasmine.createSpyObj&lt;LoggerService&gt;(&#39;LoggerService&#39;, [&#39;warn&#39;, &#39;info&#39;])</code></li>
<li>Spy on an emit: <code>spyOn(component.fooEvent, &#39;emit&#39;)</code></li>
</ul>
<h2><a name="6">jest fake time</a></h2>
<ul>
<li>Use fake timer: <code>jest.useFakeTimers()</code> and then <code>.setSystemTime(new Date(&#39;2020-01-01&#39;))</code></li>
<li>Stop using fake timers: <code>jest.useRealTimers()</code></li>
<li>Run all timers: <code>jest.runAllTimers()</code></li>
</ul>
</div>
<script src="../../main.js?v=2.0.0"></script>
</body>
</html>
