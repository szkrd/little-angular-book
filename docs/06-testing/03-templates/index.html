<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>little angular book</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../normalize.css">
    <link rel="stylesheet" href="../../hljs-theme.css">
    <link rel="stylesheet" href="../../markdown.css">
    <link rel="stylesheet" href="../../main.css?v=2.0.0">
</head>
<body>
<a id="menu-toggle" class="menu-toggle" href="#" title="toggle menu">
    <span></span><span></span><span></span>
</a>
<div class="menu">
    
        <div class="menu-item depth-1 ">
             
            <a href="../../index.html">Little angular book</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../01-typescript/index.html">TypeScript</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/01-basic-types/index.html">Basic types</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/02-classes-interfaces/index.html">Classes and interfaces</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/03-functions/index.html">Functions</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/04-enums/index.html">Enums</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/05-advanced-types/index.html">Advanced types</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/06-decorators/index.html">Decorators</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/07-generics/index.html">Generics</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../02-components/index.html">Components</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/01-lifecycle-events/index.html">Lifecycle events</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/02-input-output/index.html">Input / Output</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/03-templates/index.html">Templates</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/01-raw-html/index.html">Raw HTML</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/02-data-flow/index.html">Data flow</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/03-class-style/index.html">Class &amp; style helpers</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/04-structural-directives/index.html">Structural directives</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/04-styles/index.html">Styles</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../03-routing/index.html">Routing</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../03-routing/01-parameters/index.html">Route parameters</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../03-routing/02-query-parameters/index.html">Query parameters</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../04-dependency-injection/index.html">Dependency injection</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/01-circumventing-di/index.html">Circumventing the DI system</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/02-sharing-services/index.html">Sharing services</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/03-providers/index.html">Providers</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../04-dependency-injection/03-providers/01-class-provider/index.html">Class provider</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../04-dependency-injection/03-providers/02-factory-provider/index.html">Factory provider</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../04-dependency-injection/03-providers/03-value-provider/index.html">Value provider</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/04-di-tricks/index.html">DI tricks</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../05-services/index.html">Services</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../06-testing/index.html">Testing</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../06-testing/01-jasmine/index.html">Jasmine </a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../06-testing/02-snippets/index.html">Snippets</a>
            
        </div>
    
        <div class="menu-item depth-3 selected">
            ▹
            <a href="../../06-testing/03-templates/index.html">Templates</a>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#1">
                        Standalone service
                    </a>
                </div>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#2">
                        Standalone component
                    </a>
                </div>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../07-observables/index.html">Observables</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../07-observables/01-examples/index.html">Examples</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../08-problems/index.html">Problems</a>
            
        </div>
    
</div>
<div class="markdown-body"><h1>Templates</h1>
<h2><a name="1">Standalone service</a></h2>
<pre class="hljs"><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">TestBed</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core/testing&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FooBarService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./foo-bar.service&#x27;</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;FooBarService&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">loggerServiceMock</span>: jasmine.<span class="hljs-property">SpyObj</span>&lt;<span class="hljs-title class_">LoggerService</span>&gt;;

    <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> {
        loggerServiceMock = jasmine.<span class="hljs-property">createSpyObj</span>&lt;<span class="hljs-title class_">LoggerService</span>&gt;(<span class="hljs-string">&#x27;LoggerService&#x27;</span>, [<span class="hljs-string">&#x27;error&#x27;</span>]);

        <span class="hljs-title class_">TestBed</span>.<span class="hljs-title function_">configureTestingModule</span>({
            <span class="hljs-attr">providers</span>: [
                <span class="hljs-title class_">FooBarService</span>,
                { <span class="hljs-attr">provide</span>: <span class="hljs-title class_">LoggerService</span>, <span class="hljs-attr">useValue</span>: loggerServiceMock },
            ],
        });
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should create&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// Assert</span>
        <span class="hljs-title function_">expect</span>(service).<span class="hljs-title function_">toBeInstanceOf</span>(<span class="hljs-title class_">FooBarService</span>);
    });

    <span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;something&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should do something&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-comment">// Arrange</span>
            <span class="hljs-comment">// Act</span>
            <span class="hljs-comment">// Assert</span>
            <span class="hljs-title function_">expect</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">1</span>);
        });
    });
});
</code></pre><h2><a name="2">Standalone component</a></h2>
<ul>
<li>Since Angular 19 all components will be (are) standalone by default, the <code>standalone: true</code> can be omitted then.</li>
<li>With <code>componentRef.setInput</code> there is no more need for a wrapper component.</li>
</ul>
<pre class="hljs"><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChangeDetectionStrategy</span>, <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ComponentFixture</span>, <span class="hljs-title class_">TestBed</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core/testing&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/router&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FooBarComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./foo-bar.component&#x27;</span>;

<span class="hljs-meta">@Component</span>({
    <span class="hljs-attr">selector</span>: <span class="hljs-string">&#x27;tt-corge-mock-component&#x27;</span>,
    <span class="hljs-attr">standalone</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">changeDetection</span>: <span class="hljs-title class_">ChangeDetectionStrategy</span>.<span class="hljs-property">OnPush</span>,
})
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CorgeMockComponent</span> {}

<span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;FooBarComponent&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-attr">component</span>: <span class="hljs-title class_">FooBarComponent</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">fixture</span>: <span class="hljs-title class_">ComponentFixture</span>&lt;<span class="hljs-title class_">FooBarComponent</span>&gt;;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">routerSpy</span>: jasmine.<span class="hljs-property">SpyObj</span>&lt;<span class="hljs-title class_">Router</span>&gt;;

    <span class="hljs-title function_">beforeEach</span>(<span class="hljs-title function_">async</span> () =&gt; {
        routerSpy = jasmine.<span class="hljs-title function_">createSpyObj</span>(<span class="hljs-string">&#x27;router&#x27;</span>, [<span class="hljs-string">&#x27;navigateByUrl&#x27;</span>]);
      
        <span class="hljs-keyword">await</span> <span class="hljs-title class_">TestBed</span>.<span class="hljs-title function_">configureTestingModule</span>({
            <span class="hljs-attr">imports</span>: [ <span class="hljs-title class_">RouterTestingModule</span>, <span class="hljs-title class_">NoopAnimationsModule</span> ], <span class="hljs-comment">// angular modules</span>
            <span class="hljs-attr">providers</span>: [
              { <span class="hljs-attr">provide</span>: <span class="hljs-title class_">Router</span>, <span class="hljs-attr">useValue</span>: routerSpy }, <span class="hljs-comment">// injected deps</span>
              ],
        }).<span class="hljs-title function_">overrideComponent</span>(<span class="hljs-title class_">FooBarComponent</span>, {
            <span class="hljs-attr">remove</span>: {
                <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CorgeComponent</span>], <span class="hljs-comment">// real children</span>
            },
            <span class="hljs-attr">add</span>: {
                <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">CorgeMockComponent</span>], <span class="hljs-comment">// mock children</span>
            },
        }).<span class="hljs-title function_">compileComponents</span>();

        fixture = <span class="hljs-title class_">TestBed</span>.<span class="hljs-title function_">createComponent</span>(<span class="hljs-title class_">FooBarComponent</span>);
        component = fixture.<span class="hljs-property">componentInstance</span>;
        fixture.<span class="hljs-property">componentRef</span>.<span class="hljs-title function_">setInput</span>(<span class="hljs-string">&#x27;fooInput&#x27;</span>, { <span class="hljs-attr">foo</span>: <span class="hljs-number">42</span> });
    });

    <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should create&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// Assert</span>
        <span class="hljs-title function_">expect</span>(component).<span class="hljs-title function_">toBeInstanceOf</span>(<span class="hljs-title class_">FooBarComponent</span>);
    });

    <span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;something&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should do something&#x27;</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-comment">// Arrange</span>
            <span class="hljs-comment">// Act</span>
            <span class="hljs-comment">// Assert</span>
            <span class="hljs-title function_">expect</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">1</span>);
        });
    });
});
</code></pre></div>
<script src="../../main.js?v=2.0.0"></script>
</body>
</html>
