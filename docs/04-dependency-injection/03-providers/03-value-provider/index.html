<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>little angular book</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../../normalize.css">
    <link rel="stylesheet" href="../../../hljs-theme.css">
    <link rel="stylesheet" href="../../../markdown.css">
    <link rel="stylesheet" href="../../../main.css?v=2.0.0">
</head>
<body>
<a id="menu-toggle" class="menu-toggle" href="#" title="toggle menu">
    <span></span><span></span><span></span>
</a>
<div class="menu">
    
        <div class="menu-item depth-1 ">
             
            <a href="../../../index.html">Little angular book</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../../01-typescript/index.html">TypeScript</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../01-typescript/01-basic-types/index.html">Basic types</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../01-typescript/02-classes-interfaces/index.html">Classes and interfaces</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../01-typescript/03-functions/index.html">Functions</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../01-typescript/04-enums/index.html">Enums</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../01-typescript/05-advanced-types/index.html">Advanced types</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../01-typescript/06-decorators/index.html">Decorators</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../01-typescript/07-generics/index.html">Generics</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../../02-components/index.html">Components</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../02-components/01-lifecycle-events/index.html">Lifecycle events</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../02-components/02-input-output/index.html">Input / Output</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../02-components/03-templates/index.html">Templates</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../../02-components/03-templates/01-raw-html/index.html">Raw HTML</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../../02-components/03-templates/02-data-flow/index.html">Data flow</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../../02-components/03-templates/03-class-style/index.html">Class &amp; style helpers</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../../02-components/03-templates/04-structural-directives/index.html">Structural directives</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../02-components/04-styles/index.html">Styles</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../../03-routing/index.html">Routing</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../03-routing/01-parameters/index.html">Route parameters</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../03-routing/02-query-parameters/index.html">Query parameters</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../../04-dependency-injection/index.html">Dependency injection</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../04-dependency-injection/01-circumventing-di/index.html">Circumventing the DI system</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../04-dependency-injection/02-sharing-services/index.html">Sharing services</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../04-dependency-injection/03-providers/index.html">Providers</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../../04-dependency-injection/03-providers/01-class-provider/index.html">Class provider</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../../04-dependency-injection/03-providers/02-factory-provider/index.html">Factory provider</a>
            
        </div>
    
        <div class="menu-item depth-4 selected">
            ▪
            <a href="../../../04-dependency-injection/03-providers/03-value-provider/index.html">Value provider</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../04-dependency-injection/04-di-tricks/index.html">DI tricks</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../../05-services/index.html">Services</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../../06-testing/index.html">Testing</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../06-testing/01-jasmine/index.html">Jasmine </a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../06-testing/02-snippets/index.html">Snippets</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../06-testing/03-templates/index.html">Templates</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../../07-observables/index.html">Observables</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../../07-observables/01-examples/index.html">Examples</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../../08-problems/index.html">Problems</a>
            
        </div>
    
</div>
<div class="markdown-body"><h1>Value provider</h1>
<p>Here&#39;s the previous example, but with a value, not a wrapper class.</p>
<p>Since this is not a class, we&#39;re not instanciating anything this time.</p>
<pre class="hljs"><code class="hljs language-typescript"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">MarkedOptions</span>, parse} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;marked&#x27;</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">MarkedParser</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">src</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">options</span>?: <span class="hljs-title class_">MarkedOptions</span></span>) =&gt;</span> <span class="hljs-built_in">string</span>;

<span class="hljs-meta">@Directive</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">&#x27;[appMarkdown]&#x27;</span>,
  <span class="hljs-attr">providers</span>: [
    { <span class="hljs-attr">provide</span>: <span class="hljs-string">&#x27;toMarkdown&#x27;</span>, <span class="hljs-attr">useValue</span>: parse } <span class="hljs-comment">// &lt;-- !!</span>
  ]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MarkdownDirective</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OnChanges</span>, <span class="hljs-title class_">OnInit</span> {
  <span class="hljs-attr">toMarkdown</span>: <span class="hljs-title class_">MarkedParser</span>;
  <span class="hljs-meta">@Input</span>(<span class="hljs-string">&#x27;appMarkdown&#x27;</span>) <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">private</span> <span class="hljs-attr">el</span>: <span class="hljs-title class_">ElementRef</span>,
    <span class="hljs-meta">@Inject</span>(<span class="hljs-string">&#x27;toMarkdown&#x27;</span>) <span class="hljs-attr">toMarkdown</span>: <span class="hljs-title class_">MarkedParser</span> <span class="hljs-comment">// &lt;-- !!</span>
  </span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">toMarkdown</span> = toMarkdown;
  }
  
  <span class="hljs-comment">// ...</span>
}
</code></pre><p>The &quot;toMarkdown&quot; id is a string (but we could&#39;ve used anything else with the provide property).</p>
<p>To avoid name collisions one may use a unique value - the recommended wrapper is the <code>InjectionToken</code> (its previous version, the OpaqueToken, has been deprecated) class:</p>
<pre class="hljs"><code class="hljs language-typescript"><span class="hljs-keyword">const</span> injectableId = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InjectionToken</span>&lt;<span class="hljs-title class_">MarkedParser</span>&gt;(<span class="hljs-string">&#x27;toMarkDown&#x27;</span>);
</code></pre><p>Then use the &quot;symbolish&quot; id in <code>@Inject(injectableId)</code>.</p>
<p>:bomb: For some reason Symbol as an id doesn&#39;t work with Angular 5, though it clearly should. This may be a <a href="https://github.com/angular/angular/issues/12082">regression</a>.</p>
</div>
<script src="../../../main.js?v=2.0.0"></script>
</body>
</html>
