<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>little angular book</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../normalize.css">
    <link rel="stylesheet" href="../../hljs-theme.css">
    <link rel="stylesheet" href="../../markdown.css">
    <link rel="stylesheet" href="../../main.css?v=2.0.0">
</head>
<body>
<a id="menu-toggle" class="menu-toggle" href="#" title="toggle menu">
    <span></span><span></span><span></span>
</a>
<div class="menu">
    
        <div class="menu-item depth-1 ">
             
            <a href="../../index.html">Little angular book</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../01-typescript/index.html">TypeScript</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/01-basic-types/index.html">Basic types</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/02-classes-interfaces/index.html">Classes and interfaces</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/03-functions/index.html">Functions</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/04-enums/index.html">Enums</a>
            
        </div>
    
        <div class="menu-item depth-3 selected">
            ▹
            <a href="../../01-typescript/05-advanced-types/index.html">Advanced types</a>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#1">
                        Custom types (type aliases)
                    </a>
                </div>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#2">
                        Intersection (&amp;) and union (|)
                    </a>
                </div>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#3">
                        Nullables with strictNullChecks
                    </a>
                </div>
            
                <div class="menu-section depth-4">
                    ◦
                    <a href="#4">
                        Type guards
                    </a>
                </div>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/06-decorators/index.html">Decorators</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../01-typescript/07-generics/index.html">Generics</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../02-components/index.html">Components</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/01-lifecycle-events/index.html">Lifecycle events</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/02-input-output/index.html">Input / Output</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/03-templates/index.html">Templates</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/01-raw-html/index.html">Raw HTML</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/02-data-flow/index.html">Data flow</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/03-class-style/index.html">Class &amp; style helpers</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../02-components/03-templates/04-structural-directives/index.html">Structural directives</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../02-components/04-styles/index.html">Styles</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../03-routing/index.html">Routing</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../03-routing/01-parameters/index.html">Route parameters</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../03-routing/02-query-parameters/index.html">Query parameters</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../04-dependency-injection/index.html">Dependency injection</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/01-circumventing-di/index.html">Circumventing the DI system</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/02-sharing-services/index.html">Sharing services</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/03-providers/index.html">Providers</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../04-dependency-injection/03-providers/01-class-provider/index.html">Class provider</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../04-dependency-injection/03-providers/02-factory-provider/index.html">Factory provider</a>
            
        </div>
    
        <div class="menu-item depth-4 ">
            ▪
            <a href="../../04-dependency-injection/03-providers/03-value-provider/index.html">Value provider</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../04-dependency-injection/04-di-tricks/index.html">DI tricks</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../05-services/index.html">Services</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../06-testing/index.html">Testing</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../06-testing/01-jasmine/index.html">Jasmine </a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../06-testing/02-snippets/index.html">Snippets</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../06-testing/03-templates/index.html">Templates</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../07-observables/index.html">Observables</a>
            
        </div>
    
        <div class="menu-item depth-3 ">
            ▹
            <a href="../../07-observables/01-examples/index.html">Examples</a>
            
        </div>
    
        <div class="menu-item depth-2 ">
            ▸
            <a href="../../08-problems/index.html">Problems</a>
            
        </div>
    
</div>
<div class="markdown-body"><h1>Advanced types</h1>
<ul>
<li>intersection (&amp;) and union (|)</li>
<li>runtime type guards (is)</li>
<li>TS understands typeof in code (for string, number, boolean, symbol)</li>
<li>TS understands instanceof in code</li>
<li>nullables (null and undefined assignable to anything; vs: strictNullChecks)</li>
<li>type aliases (vs interfaces)</li>
<li>this may be used as a return type (useful for chaining)</li>
<li>index type query operator (T, keyof T)- for partial, pluck etc.</li>
</ul>
<h2><a name="1">Custom types (type aliases)</a></h2>
<ul>
<li>unlike interfaces type aliases are just aliases, they have no &quot;real names&quot; (for example in error messages)</li>
<li>they can&#39;t be implemented or extended (if possible, try to use interfaces)</li>
</ul>
<pre class="hljs"><code class="hljs language-typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Name</span> = <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Box</span>&lt;T&gt; = { <span class="hljs-attr">value</span>: T };
<span class="hljs-keyword">type</span> <span class="hljs-title class_">LinkedList</span>&lt;T&gt; = T &amp; { <span class="hljs-attr">next</span>: <span class="hljs-title class_">LinkedList</span>&lt;T&gt; };
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Easing</span> = <span class="hljs-string">&#x27;ease-in&#x27;</span> | <span class="hljs-string">&#x27;ease-out&#x27;</span> | <span class="hljs-string">&#x27;ease-in-out&#x27;</span> | <span class="hljs-string">&#x27;linear&#x27;</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Truthy</span> = <span class="hljs-string">&#x27;enabled&#x27;</span> | <span class="hljs-string">&#x27;yes&#x27;</span> | <span class="hljs-string">&#x27;ok&#x27;</span> | <span class="hljs-string">&#x27;on&#x27;</span> | <span class="hljs-string">&#x27;true&#x27;</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">DiceRoll</span> = <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span> | <span class="hljs-number">4</span> | <span class="hljs-number">5</span> | <span class="hljs-number">6</span>;

<span class="hljs-keyword">let</span> <span class="hljs-attr">rolled</span>: <span class="hljs-title class_">DiceRoll</span> = <span class="hljs-number">9</span>; <span class="hljs-comment">// TS will mark this as an invalid assignment</span>
</code></pre><h2><a name="2">Intersection (&amp;) and union (|)</a></h2>
<ul>
<li><code>T &amp; U</code> = contains props from both T and U (useful for extends and mixins)</li>
<li><code>id: string | number</code> = &quot;either or&quot; (useful for function signatures)</li>
</ul>
<pre class="hljs"><code class="hljs language-typescript"><span class="hljs-keyword">function</span> extend&lt;T, U&gt; (<span class="hljs-attr">a</span>: T, <span class="hljs-attr">b</span>: U): T &amp; U { <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, a, b); }
<span class="hljs-keyword">let</span> foo = { <span class="hljs-attr">foo</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">qux</span>: <span class="hljs-number">2</span> };
<span class="hljs-keyword">let</span> bar = { <span class="hljs-attr">bar</span>: <span class="hljs-number">1</span> };
<span class="hljs-keyword">let</span> baz = <span class="hljs-title function_">extend</span>(foo, bar);
</code></pre><p>This is a bit like overloading, but with the returning type we have less granularity.</p>
<pre class="hljs"><code class="hljs language-typescript"><span class="hljs-keyword">let</span> multiply = (<span class="hljs-attr">source</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>, <span class="hljs-attr">times</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>): <span class="hljs-function"><span class="hljs-params">any</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> source === <span class="hljs-string">&#x27;number&#x27;</span>) {
    <span class="hljs-keyword">return</span> source * times;
  }
  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(times)).<span class="hljs-title function_">fill</span>(source).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;&#x27;</span>);
};

<span class="hljs-keyword">let</span> <span class="hljs-attr">x</span>: <span class="hljs-built_in">string</span> = <span class="hljs-title function_">multiply</span>(<span class="hljs-string">&#x27;ho&#x27;</span>, <span class="hljs-number">3</span>);
<span class="hljs-keyword">let</span> <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span> = <span class="hljs-title function_">multiply</span>(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>);

assert.<span class="hljs-title function_">equal</span>(x + y, <span class="hljs-string">&#x27;hohoho25&#x27;</span>);
</code></pre><h2><a name="3">Nullables with strictNullChecks</a></h2>
<ul>
<li><code>strictNullChecks</code> enabled will disallow assigning null and undefined, unless explicitly allowed</li>
<li>One can disable null guard with the ! postfix (only with strictNullChecks enabled)</li>
</ul>
<pre class="hljs"><code class="hljs language-typescript"><span class="hljs-keyword">let</span> foo = <span class="hljs-string">&#x27;bar&#x27;</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;

foo = <span class="hljs-literal">null</span>; <span class="hljs-comment">// not allowed with strictNullChecks</span>
name = <span class="hljs-literal">null</span>; <span class="hljs-comment">// we did let null to be assigned</span>

<span class="hljs-keyword">interface</span> X {
  <span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">b</span>?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// same as `number | undefined`</span>
}
</code></pre><h2><a name="4">Type guards</a></h2>
<p>🚀 Writing better typechecks with the &quot;is&quot; keyword:</p>
<pre class="hljs"><code class="hljs language-typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Fish</span> { <span class="hljs-attr">swim</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; }
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Bird</span> { <span class="hljs-attr">fly</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; }

<span class="hljs-keyword">let</span> <span class="hljs-attr">myBird</span>: <span class="hljs-title class_">Bird</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Tweetie&#x27;</span>, <span class="hljs-attr">fly</span>: <span class="hljs-literal">true</span> };
<span class="hljs-keyword">let</span> <span class="hljs-attr">myFish</span>: <span class="hljs-title class_">Fish</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Wanda&#x27;</span>, <span class="hljs-attr">swim</span>: <span class="hljs-literal">true</span> };
<span class="hljs-keyword">let</span> pets = [ myBird, myFish ];

<span class="hljs-comment">//                                  item is Type</span>
<span class="hljs-comment">//                                       ↓</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isFish</span> (<span class="hljs-params"><span class="hljs-attr">pet</span>: <span class="hljs-title class_">Fish</span> | <span class="hljs-title class_">Bird</span></span>): pet is <span class="hljs-title class_">Fish</span> {
  <span class="hljs-keyword">return</span> (pet <span class="hljs-keyword">as</span> <span class="hljs-title class_">Fish</span>).<span class="hljs-property">swim</span> !== <span class="hljs-literal">undefined</span>;
}
</code></pre></div>
<script src="../../main.js?v=2.0.0"></script>
</body>
</html>
